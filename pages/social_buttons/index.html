<!DOCTYPE html>
<html prefix="
" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pollard&#8217;s Rho · Using Alternative Social Buttons with Nikola </title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="../../assets/demo.css" type="text/css">
<meta content="#5670d4" name="theme-color">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://nicholas-miklaucic.github.io/pages/social_buttons/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="The Nikola Team">
</head>
<body class="">
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>

    <div class="hsidebar">
        <div class="container sidebar-sticky">
            <div class="sidebar-about">
              <h1>
                <a href="https://nicholas-miklaucic.github.io/">
                      <h1 id="brand"><a class="no-tufte-underline" href="https://nicholas-miklaucic.github.io/" title="Pollard's Rho" rel="home">

        <span id="blog-title">Pollard&#8217;s&nbsp;Rho</span>
    </a></h1>

                </a>
              </h1>
                <p class="lead">Thoughts on math, computing, and&nbsp;data</p>

            </div>
                <nav id="menu" role="navigation" class="sidebar-nav"><a class="no-tufte-underline sidebar-nav-item" href="../about-me/">About Me</a>
        <a class="no-tufte-underline sidebar-nav-item" href="../../archive.html">Archive</a>
        <a class="no-tufte-underline sidebar-nav-item" href="../../categories/">Tags</a>
        <a class="no-tufte-underline sidebar-nav-item" href="../../rss.xml">RSS feed</a>
    
    
    </nav><footer id="footer"><span class="copyright">
              Contents © 2019         <a href="mailto:nicholas.miklaucic@gmail.com">Nicholas Miklaucic</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
            </span>
            
            
        </footer>
</div>
    </div>

    <div class="content container" id="content">
<article class="post-text storypage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="post-title p-name"><a href="." class="u-url">Using Alternative Social Buttons with&nbsp;Nikola</a></h1>

        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<table class="docinfo" frame="void" rules="none">
<col class="docinfo-name">
<col class="docinfo-content">
<tbody valign="top"><tr>
<th class="docinfo-name">Version:</th>
<td>8.0.2</td>
</tr></tbody>
</table>
<div class="contents alert alert-primary float-md-right topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#the-default" id="id2">The&nbsp;Default</a></li>
<li><a class="reference internal" href="#sharenice" id="id3">ShareNice</a></li>
<li>
<a class="reference internal" href="#socialshareprivacy" id="id4">SocialSharePrivacy</a><ul>
<li><a class="reference internal" href="#the-hard-way" id="id5">The Hard&nbsp;Way</a></li>
<li><a class="reference internal" href="#the-easy-way" id="id6">The Easy&nbsp;Way</a></li>
</ul>
</li>
</ul>
</div>
<div class="section" id="the-default">
<h2><a class="toc-backref" href="#id2">The&nbsp;Default</a></h2>
<p>By Default, the themes provided with Nikola will add to your pages a &#8220;slide in&#8221; widget at
the bottom right of the page, provided by Addthis. This is the HTML code for&nbsp;that:</p>
<pre class="code html"><a name="rest_code_fb0d6c533e2143e89e5fddb8671667e9-1"></a><span class="c">&lt;!-- Social buttons --&gt;</span>
<a name="rest_code_fb0d6c533e2143e89e5fddb8671667e9-2"></a><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">"addthisbox"</span> <span class="na">class</span><span class="o">=</span><span class="s">"addthis_toolbox addthis_peekaboo_style</span>
<a name="rest_code_fb0d6c533e2143e89e5fddb8671667e9-3"></a><span class="s">    addthis_default_style addthis_label_style addthis_32x32_style"</span><span class="p">&gt;</span>
<a name="rest_code_fb0d6c533e2143e89e5fddb8671667e9-4"></a><span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">"addthis_button_more"</span><span class="p">&gt;</span>Share<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<a name="rest_code_fb0d6c533e2143e89e5fddb8671667e9-5"></a><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">"addthis_button_facebook"</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<a name="rest_code_fb0d6c533e2143e89e5fddb8671667e9-6"></a><span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">"addthis_button_google_plusone_share"</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<a name="rest_code_fb0d6c533e2143e89e5fddb8671667e9-7"></a><span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">"addthis_button_linkedin"</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<a name="rest_code_fb0d6c533e2143e89e5fddb8671667e9-8"></a><span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">"addthis_button_twitter"</span><span class="p">&gt;&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
<a name="rest_code_fb0d6c533e2143e89e5fddb8671667e9-9"></a><span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
<a name="rest_code_fb0d6c533e2143e89e5fddb8671667e9-10"></a><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
<a name="rest_code_fb0d6c533e2143e89e5fddb8671667e9-11"></a><span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-4f7088a56bb93798"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
<a name="rest_code_fb0d6c533e2143e89e5fddb8671667e9-12"></a><span class="c">&lt;!-- End of social buttons --&gt;</span>
<a name="rest_code_fb0d6c533e2143e89e5fddb8671667e9-13"></a>"""
</pre>
<p>You can change that using the <tt class="docutils literal">SOCIAL_BUTTONS_CODE</tt> option in your conf.py. In some cases, just
doing that will be enough but in others, it won&#8217;t. This document tries to describe all the bits
involved in making this work&nbsp;correctly.</p>
<dl class="docutils">
<dt>Part 1: <tt class="docutils literal">SOCIAL_BUTTONS_CODE</tt>
</dt>
<dd>Social sharing services like addthis and others will provide you a HTML snippet.
If it is self-contained, then just setting <tt class="docutils literal">SOCIAL_BUTTONS_CODE</tt> may be enough.
Try&nbsp;:-)</dd>
<dt>Part 2: The&nbsp;theme</dt>
<dd>The <tt class="docutils literal">SOCIAL_BUTTONS_CODE</tt> HTML fragment will be embedded <em>somewhere</em> by the theme. Whether that
is the correct place or not is not something the theme author can truly know, so it is possible that
you may have to tweak the <tt class="docutils literal">base.html</tt> template to make it look&nbsp;good.</dd>
<dt>Part 3: <tt class="docutils literal">BODY_END</tt> and <tt class="docutils literal">EXTRA_HEAD_DATA</tt>
</dt>
<dd>
<p class="first">Some social sharing code requires JS execution that depends on JQuery being available
(example: <a class="reference external" href="https://github.com/panzi/SocialSharePrivacy">SocialSharePrivacy</a>). It&#8217;s good
practice (and often, the only way that will work) to put those at the end of <tt class="docutils literal">&lt;BODY&gt;</tt>,
and one easy way to do that is to put them in <tt class="docutils literal">BODY_END</tt></p>
<p class="last">On the other hand, it&#8217;s possible that it requires you to load some CSS files.
The right place for that is in the document&#8217;s <tt class="docutils literal">&lt;HEAD&gt;</tt> so they should be added
in <tt class="docutils literal">EXTRA_HEAD_DATA</tt></p>
</dd>
<dt>Part 4:&nbsp;assets</dt>
<dd>For sharing code that doesn&#8217;t rely on a social sharing service, you may need to add CSS, Image, or JS
files to your&nbsp;site</dd>
</dl>
</div>
<div class="section" id="sharenice">
<h2><a class="toc-backref" href="#id3">ShareNice</a></h2>
<p><a class="reference external" href="https://graingert.co.uk/shareNice/">ShareNice</a> is &#8220;written in order to provide social sharing features to
web developers and website administrators who wish to maintain and protect their users&#8217; privacy&#8221;
which sounds cool to&nbsp;me.</p>
<p>Let&#8217;s go step by step into integrating the hosted version of ShareNice into a Nikola&nbsp;site.</p>
<p>For testing purposes, let&#8217;s do it on a demo&nbsp;site:</p>
<pre class="literal-block">
$ nikola init --demo sharenice_test
A new site with example data has been created at sharenice_test.
See README.txt in that folder for more information.
$ cd sharenice_test/
</pre>
<p>To see what&#8217;s going on, let&#8217;s start Nikola in &#8220;auto mode&#8221;. This should build the
site and open a web browser showing the default configuration, with the AddThis&nbsp;widget:</p>
<pre class="literal-block">
$ nikola auto -b
</pre>
<p>First, let&#8217;s add the HTML snippet that will show the sharing options. In your conf.py, set this, which
is the HTML code suggested by&nbsp;ShareNice:</p>
<pre class="code python"><a name="rest_code_a92011aca76c4a4fa4f41bdb335229b5-1"></a><span class="n">SOCIAL_BUTTONS_CODE</span> <span class="o">=</span> <span class="s2">"""&lt;div id="shareNice" data-share-label="Share"</span>
<a name="rest_code_a92011aca76c4a4fa4f41bdb335229b5-2"></a><span class="s2">    data-color-scheme="black" data-icon-size="32" data-panel-bottom="plain"</span>
<a name="rest_code_a92011aca76c4a4fa4f41bdb335229b5-3"></a><span class="s2">    data-services="plus.google.com,facebook.com,digg.com,email,delicious.com,twitter.com"</span>
<a name="rest_code_a92011aca76c4a4fa4f41bdb335229b5-4"></a><span class="s2">    style="float:right"&gt;&lt;/div&gt;"""</span>
<a name="rest_code_a92011aca76c4a4fa4f41bdb335229b5-5"></a>
<a name="rest_code_a92011aca76c4a4fa4f41bdb335229b5-6"></a><span class="n">BODY_END</span> <span class="o">=</span> <span class="s2">"""&lt;script src="http://graingert.co.uk/shareNice/code.js"&gt;&lt;/script&gt;"""</span>
</pre>
<p>And you should now see a sharing box at the bottom right of the&nbsp;page.</p>
<p>Main problem remaining is that it doesn&#8217;t really look good and integrated in the page layout.
I suggest changing the code to this which looks nicer, but still has some placement&nbsp;issues:</p>
<pre class="code python"><a name="rest_code_752e393ebce94ee58cfc43880f5cd8b9-1"></a><span class="n">SOCIAL_BUTTONS_CODE</span> <span class="o">=</span> <span class="s2">"""&lt;div id="shareNice" data-share-label="Share"</span>
<a name="rest_code_752e393ebce94ee58cfc43880f5cd8b9-2"></a><span class="s2">    data-color-scheme="black" data-icon-size="32" data-panel-bottom="plain"</span>
<a name="rest_code_752e393ebce94ee58cfc43880f5cd8b9-3"></a><span class="s2">    data-services="plus.google.com,facebook.com,email,twitter.com"</span>
<a name="rest_code_752e393ebce94ee58cfc43880f5cd8b9-4"></a><span class="s2">    style="position: absolute; left: 20px; top: 60px;"&gt;&lt;/div&gt;"""</span>
</pre>
<p>If anyone comes up with a better idea of styling/placement, just let me know&nbsp;;-)</p>
<p>One bad bit of this so far is that you are now using a script from another site, and that
doesn&#8217;t let Nikola perform as many optimizations to your page as it could.
So, if you really want to go the extra mile to save a few KB and round trips, you <em>could</em>
install your own copy from the <a class="reference external" href="https://github.com/mischat/shareNice">github repo</a> and
use that instead of the copy at <a class="reference external" href="http://graingert.co.uk/shareNice">ShareNice</a>.</p>
<p>Then, you can create your own theme inheriting from the one you are using and add the CSS
and JS files from ShareNice into your <tt class="docutils literal">bundles</tt> configuration so they are combined and&nbsp;minified.</p>
</div>
<div class="section" id="socialshareprivacy">
<h2><a class="toc-backref" href="#id4">SocialSharePrivacy</a></h2>
<div class="section" id="the-hard-way">
<h3><a class="toc-backref" href="#id5">The Hard&nbsp;Way</a></h3>
<p><a class="reference external" href="https://github.com/panzi/SocialSharePrivacy">SocialSharePrivacy</a> is &#8220;a jQuery plugin that
lets you add social share buttons to your website that don&#8217;t allow the social sites to track
your users.&#8221;&nbsp;Nice!</p>
<p>Let&#8217;s go step-by-step into integrating SocialSharePrivacy into a Nikola site. To improve
privacy, they recommend you not use the hosted service so we&#8217;ll do it the hard way, by
getting and distributing everything in our own&nbsp;site.</p>
<p><a class="reference external" href="https://github.com/panzi/SocialSharePrivacy">https://github.com/panzi/SocialSharePrivacy</a></p>
<p>For testing purposes, let&#8217;s do it on a demo&nbsp;site:</p>
<pre class="literal-block">
$ nikola init --demo ssp_test
A new site with example data has been created at ssp_test.
See README.txt in that folder for more information.
$ cd ssp_test/
</pre>
<p>To see what&#8217;s going on, let&#8217;s start Nikola in &#8220;auto mode&#8221;. This should build the
site and open a web browser showing the default configuration, with the AddThis&nbsp;widget:</p>
<pre class="literal-block">
$ nikola auto -b
</pre>
<p>Now, download <a class="reference external" href="https://github.com/panzi/SocialSharePrivacy/archive/master.zip">the current version</a>
and unzip it. You will have a <tt class="docutils literal"><span class="pre">SocialSharePrivacy-master</span></tt> folder with lots of stuff in&nbsp;it.</p>
<p>First, we need to build it (this requires a working and modern uglifyjs, this may not be&nbsp;easy):</p>
<pre class="literal-block">
$ cd SocialSharePrivacy-master
$ sh build.sh -m gplus,twitter,facebook,mail -s "/assets/css/socialshareprivacy.css" -a off
</pre>
<p>You will now have several files in a <tt class="docutils literal">build</tt> folder. We need to bring them into the&nbsp;site:</p>
<pre class="literal-block">
$ cp -Rv SocialSharePrivacy-master/build/* files/
$ cp -R SocialSharePrivacy-master/images/ files/assets/
</pre>
<p>Edit your <tt class="docutils literal">conf.py</tt>:</p>
<pre class="code python"><a name="rest_code_3041e74d5a9a43fba1e4181bf8fa5467-1"></a><span class="n">BODY_END</span> <span class="o">=</span> <span class="s2">"""</span>
<a name="rest_code_3041e74d5a9a43fba1e4181bf8fa5467-2"></a><span class="s2">&lt;script src="/javascripts/jquery.socialshareprivacy.min.js"&gt;&lt;/script&gt;</span>
<a name="rest_code_3041e74d5a9a43fba1e4181bf8fa5467-3"></a><span class="s2">&lt;script&gt;</span>
<a name="rest_code_3041e74d5a9a43fba1e4181bf8fa5467-4"></a><span class="s2">$(document).ready(function () {</span>
<a name="rest_code_3041e74d5a9a43fba1e4181bf8fa5467-5"></a><span class="s2">    $('.share').socialSharePrivacy();</span>
<a name="rest_code_3041e74d5a9a43fba1e4181bf8fa5467-6"></a><span class="s2">});</span>
<a name="rest_code_3041e74d5a9a43fba1e4181bf8fa5467-7"></a><span class="s2">&lt;/script&gt;</span>
<a name="rest_code_3041e74d5a9a43fba1e4181bf8fa5467-8"></a><span class="s2">"""</span>
<a name="rest_code_3041e74d5a9a43fba1e4181bf8fa5467-9"></a>
<a name="rest_code_3041e74d5a9a43fba1e4181bf8fa5467-10"></a><span class="n">SOCIAL_BUTTONS_CODE</span> <span class="o">=</span> <span class="s2">"""&lt;div class="share"&gt;&lt;/div&gt;"""</span>
</pre>
<p>In my experience this produces a broken, duplicate, semi-working thing. YMMV and if you make it work correctly, let me know how&nbsp;:-)</p>
</div>
<div class="section" id="the-easy-way">
<h3><a class="toc-backref" href="#id6">The Easy&nbsp;Way</a></h3>
<p>Go to <a class="reference external" href="http://panzi.github.io/SocialSharePrivacy/">http://panzi.github.io/SocialSharePrivacy/</a> and use the provided form to get the code. Make sure you check &#8220;I already use JQuery&#8221;
if you are using one of the themes that require it, like site or default, select the services you want, and use your disqus name if
you have&nbsp;one.</p>
<p>It will give you 3 code&nbsp;snippets:</p>
<dl class="docutils">
<dt><span class="dquo">&#8220;</span>Insert this once in the head of your&nbsp;page&#8221;</dt>
<dd>Put it in <tt class="docutils literal">BODY_END</tt>
</dd>
<dt><span class="dquo">&#8220;</span>Insert this wherever you want a share widget&nbsp;displayed&#8221;</dt>
<dd>Put it in <tt class="docutils literal">SOCIAL_BUTTONS_CODE</tt>
</dd>
<dt><span class="dquo">&#8220;</span>Insert this once anywhere after the other&nbsp;code&#8221;</dt>
<dd>Put it in <tt class="docutils literal">BODY_END</tt>
</dd>
</dl>
<p>That should give you a working integration (not&nbsp;tested)</p>
</div>
</div>
</div>
    </div>
    
</article>
</div>
            <script src="../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><script type="text/javascript">
    var MTIProjectId='a0c6a264-432e-4405-ab1a-8b212bb5c7c7';
    (function() {
    var mtiTracking = document.createElement('script');
    mtiTracking.type='text/javascript';
    mtiTracking.async='true';
    mtiTracking.src='mtiFontTrackingCode.js';
    (document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild( mtiTracking );
    })();
    </script>
</body>
</html>